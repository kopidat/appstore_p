/**
 * SKIMP-FR-012.js
 * @ 앱 상세
 * 2021.05.24
 */

var appNo = MData.param('appNo');

var pageInit = function(){
	pageEvent();

	appDetailSearch();
};

var pageEvent = function(){


};


//앱 상세조회
var appDetailSearch = function(){
	MNet.httpSend({
        path : "skimp/common/api/SKIMP-0006",
        sendData : {
            appIdx: appNo,
        },
        callback : function(rst, setting){
            console.log(rst);

			var appIconInfo = rst.appIconImageInfo;
			var previewInfo = rst.previewImageInfo;
            var appInfo = rst.appInfo;

            var appEx = appInfo.app_info.replace(/\r\n/g, '<br>');

            $('#appIcon').attr('src', appIconInfo.img_path_1);
            $('#appNm').text(appInfo.app_nm);
            $('#appVer').text(appInfo.app_ver);
            $('#categoryNm').text(appInfo.cate_nm);
            $('.explain').html(appEx);

            var previewListHtml = '';

            //미리보기 이미지 최대 4개까지 보여줌
            $('#previewImg button').eq(0).children('img').attr('src', previewInfo.img_path_1);
            $('#previewImg button').eq(1).children('img').attr('src', previewInfo.img_path_2);
            $('#previewImg button').eq(2).children('img').attr('src', previewInfo.img_path_3);
            $('#previewImg button').eq(3).children('img').attr('src', previewInfo.img_path_4);
        },
        errCallback : function(errCd, errMsg){
            console.log(errCd, errMsg);
        }
    });

    //footer 페이지 이동
	$(document).on('click', '#btnFooter button', function(){
		var thisId = $(this).attr('id');
		var thisPageUrl = "";

		if(thisId == "btnGroup"){
			thisPageUrl = "SKIMP-FR-007.html";
		}else if(thisId == "btnUpdate"){
			thisPageUrl = "SKIMP-FR-013.html";
		}else if(thisId == "btnNotice"){
			thisPageUrl = "SKIMP-FR-015.html";
		}else if(thisId == "btnSetting"){
			thisPageUrl = "SKIMP-FR-017.html";
		}

		MPage.html({
			url : thisPageUrl,
			animation : "NONE",
		})
	});
}



var MStatus = {
		onReady : function(){
			pageInit();
		},

//		onBack : function(){
//
//		},

		onRestore : function(){

		},

		onHide : function(){

		},

		onDestroy : function(){

		},

		onPause : function(){

		},

		onResume : function(){

		}
}